"use strict";(self.webpackChunkpushfeedback=self.webpackChunkpushfeedback||[]).push([[2350],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>b});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},d="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),d=c(n),m=a,b=d["".concat(l,".").concat(m)]||d[m]||f[m]||o;return n?r.createElement(b,s(s({ref:t},u),{},{components:n})):r.createElement(b,s({ref:t},u))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,s=new Array(o);s[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[d]="string"==typeof e?e:a,s[1]=i;for(var c=2;c<o;c++)s[c]=n[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(7294),a=n(6010);const o={tabItem:"tabItem_Ymn6"};function s(e){let{children:t,hidden:n,className:s}=e;return r.createElement("div",{role:"tabpanel",className:(0,a.Z)(o.tabItem,s),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>E});var r=n(7462),a=n(7294),o=n(6010),s=n(2466),i=n(6550),l=n(1980),c=n(7392),u=n(12);function d(e){return function(e){return a.Children.map(e,(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:a}}=e;return{value:t,label:n,attributes:r,default:a}}))}function f(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=t??d(n);return function(e){const t=(0,c.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function b(e){let{queryString:t=!1,groupId:n}=e;const r=(0,i.k6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(o),(0,a.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(r.location.search);t.set(o,e),r.replace({...r.location,search:t.toString()})}),[o,r])]}function p(e){const{defaultValue:t,queryString:n=!1,groupId:r}=e,o=f(e),[s,i]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:o}))),[l,c]=b({queryString:n,groupId:r}),[d,p]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,o]=(0,u.Nk)(n);return[r,(0,a.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:r}),v=(()=>{const e=l??d;return m({value:e,tabValues:o})?e:null})();(0,a.useLayoutEffect)((()=>{v&&i(v)}),[v]);return{selectedValue:s,selectValue:(0,a.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);i(e),c(e),p(e)}),[c,p,o]),tabValues:o}}var v=n(2389);const h={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function k(e){let{className:t,block:n,selectedValue:i,selectValue:l,tabValues:c}=e;const u=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.o5)(),f=e=>{const t=e.currentTarget,n=u.indexOf(t),r=c[n].value;r!==i&&(d(t),l(r))},m=e=>{let t=null;switch(e.key){case"Enter":f(e);break;case"ArrowRight":{const n=u.indexOf(e.currentTarget)+1;t=u[n]??u[0];break}case"ArrowLeft":{const n=u.indexOf(e.currentTarget)-1;t=u[n]??u[u.length-1];break}}t?.focus()};return a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":n},t)},c.map((e=>{let{value:t,label:n,attributes:s}=e;return a.createElement("li",(0,r.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>u.push(e),onKeyDown:m,onClick:f},s,{className:(0,o.Z)("tabs__item",h.tabItem,s?.className,{"tabs__item--active":i===t})}),n??t)})))}function g(e){let{lazy:t,children:n,selectedValue:r}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===r));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return a.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==r}))))}function y(e){const t=p(e);return a.createElement("div",{className:(0,o.Z)("tabs-container",h.tabList)},a.createElement(k,(0,r.Z)({},e,t)),a.createElement(g,(0,r.Z)({},e,t)))}function E(e){const t=(0,v.Z)();return a.createElement(y,(0,r.Z)({key:String(t)},e))}},1201:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>b,frontMatter:()=>i,metadata:()=>c,toc:()=>d});var r=n(7462),a=(n(7294),n(3905)),o=n(4866),s=n(5162);const i={sidebar_position:5},l="Events",c={unversionedId:"customization/feedback-events",id:"customization/feedback-events",title:"Events",description:"This feature is only available on the Professional and Unlimited plans.",source:"@site/docs/customization/feedback-events.mdx",sourceDirName:"customization",slug:"/customization/feedback-events",permalink:"/customization/feedback-events",draft:!1,tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Dark mode",permalink:"/customization/dark-mode"},next:{title:"Integrations",permalink:"/category/integrations"}},u={},d=[{value:"Events overview",id:"events-overview",level:2},{value:"How to listen for events",id:"how-to-listen-for-events",level:2},{value:"Feedback event object format",id:"feedback-event-object-format",level:2}],f={toc:d},m="wrapper";function b(e){let{components:t,...n}=e;return(0,a.kt)(m,(0,r.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"events"},"Events"),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"This feature is only available on the ",(0,a.kt)("a",{parentName:"p",href:"https://pushfeedback.com#pricing"},"Professional")," and ",(0,a.kt)("a",{parentName:"p",href:"https://pushfeedback.com#pricing"},"Unlimited")," plans.")),(0,a.kt)("p",null,"This guide explains how to listen for events emitted by the feedback widget and handle them with JavaScript."),(0,a.kt)("h2",{id:"events-overview"},"Events overview"),(0,a.kt)("p",null,"The feedback widget emits the following events:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"feedbackSent")),": Emitted when feedback is successfully submitted."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"feedbackError")),": Emitted if there is an error during feedback submission.")),(0,a.kt)("p",null,"By listening to these events, you can handle feedback dynamically, such as storing it in your database or performing any custom actions."),(0,a.kt)("h2",{id:"how-to-listen-for-events"},"How to listen for events"),(0,a.kt)("p",null,"You can listen for ",(0,a.kt)("inlineCode",{parentName:"p"},"feedbackSent")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"feedbackError")," events globally by attaching event listeners directly to the ",(0,a.kt)("inlineCode",{parentName:"p"},"document")," object.\nThis approach captures events emitted anywhere in the DOM, making it convenient to handle feedback without needing direct access to the feedback widget."),(0,a.kt)("p",null,"Here\u2019s how you can add event listeners to capture these events:"),(0,a.kt)(o.Z,{mdxType:"Tabs"},(0,a.kt)(s.Z,{value:"JavaScript",label:"JavaScript",default:!0,mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-javascript"},"document.addEventListener('DOMContentLoaded', () => {\n  document.addEventListener('feedbackSent', (event) => {\n    const feedback = event.detail.feedback;\n    console.log('Feedback submitted:', feedback);\n\n    // Example custom action: store feedback in your database\n    storeFeedbackInDatabase(feedback);\n  });\n\n  document.addEventListener('feedbackError', (event) => {\n    const error = event.detail.error;\n    console.error('Feedback submission error:', error);\n\n    // Example custom action: show error message to the user\n    showErrorToUser(error.message);\n  });\n});\n"))),(0,a.kt)(s.Z,{value:"React",label:"React",mdxType:"TabItem"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"import React, { useEffect } from 'react';\n\nconst FeedbackListener = () => {\n  useEffect(() => {\n    // Define the handler for feedbackSent\n    const handleFeedbackSent = (event) => {\n      const feedback = event.detail.feedback;\n      console.log('Feedback submitted:', feedback);\n\n      // Example custom action: store feedback in your database\n      storeFeedbackInDatabase(feedback);\n    };\n\n    // Define the handler for feedbackError\n    const handleFeedbackError = (event) => {\n      const error = event.detail.error;\n      console.error('Feedback submission error:', error);\n\n      // Example custom action: show error message to the user\n      showErrorToUser(error.message);\n    };\n\n    // Add event listeners\n    document.addEventListener('feedbackSent', handleFeedbackSent);\n    document.addEventListener('feedbackError', handleFeedbackError);\n\n    // Cleanup event listeners on unmount\n    return () => {\n      document.removeEventListener('feedbackSent', handleFeedbackSent);\n      document.removeEventListener('feedbackError', handleFeedbackError);\n    };\n  }, []); // Empty dependency array means this effect runs only on mount and unmount\n\n  return <div>Listening for feedback events...</div>;\n};\n\nexport default FeedbackListener;\n")))),(0,a.kt)("h2",{id:"feedback-event-object-format"},"Feedback event object format"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"feedbackSent")," event includes a ",(0,a.kt)("inlineCode",{parentName:"p"},"detail")," object with the following structure:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},"{\n  feedback: {\n    id: string;               // Unique ID for the feedback returned from the API\n    url: string;              // The URL where the feedback was submitted\n    message: string;          // Feedback message provided by the user\n    email: string;            // User's email address\n    project: string;          // Project identifier\n    screenshot: string;       // Base64-encoded screenshot, if available\n    rating: number;           // User's rating, if provided\n    ratingMode: string;       // Rating mode selected by the user\n    verification: string;     // Verification information\n    session: string;          // Session ID from localStorage\n  };\n}\n")),(0,a.kt)("p",null,"The feedbackError event also includes a detail object with the following structure:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},"{\n  error: {\n    status: number;           // HTTP status code returned by the server or 500 for general errors\n    message: string;          // Detailed error message returned from the server or error object for general errors\n  };\n}\n")))}b.isMDXComponent=!0}}]);